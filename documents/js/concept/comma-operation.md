# Comma Operation에 대해서

> 몇가지 예시를 통해서 어떻게 사용하면 되는 것인지 알아봅시다.

# Syntax

```js
expression1, expression2, expression3...
```

각각의 표현식이 연산되고 가장 마지막에 연산된 표현식의 값을 반환합니다.

# Example

## 1.

가장 흔히 사용될 수 있는 곳이 for문에서의 다수의 매개변수를 제공할 때입니다.([MDN](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Operators/Comma_Operator#%EC%84%A4%EB%AA%85))

5X5 이차 배열에서 대각선의 합을 구한다고 가정해봅시다. 대각선은 2가지 경우의 수가 있습니다, 오른쪽 대각선, 왼쪽 대각선.

```js
const array = [
  [1, 2, 3, 4, 5],
  [6, 7, 8, 9, 10],
  [11, 12, 13, 14, 15],
  [16, 17, 18, 19, 20],
  [21, 22, 23, 24, 25],
];

// 오른쪽 대각선
let rSum = 0;
for (let i = 0; i < array.length; i++) {
  rSum += array[i][i];
}
console.log(rSum); // 65

// 왼쪽 대각선
let lSum = 0;
for (let i = 0; i < array.length; i++) {
  lSum += array[array.length - i - 1][i];
}
console.log(lSum); // 65

// comma 연산자를 활용한 왼쪽 대각선
let cSum = 0;
for (let i = 0, j = array.length - 1; i < array.length; i++, j--) {
  cSum += array[i][j];
}
console.log(cSum); // 65
```

> 왼쪽 대각선을 구하라고 한다면, 저는 (개인적으로 😅) 일반적으로 두번째 코드처럼 사용합니다만 세번째 코드도 충분히 사용가능한 코드라고 생각합니다. 하지만 콤마 연산자에 익숙하지 않으면 처음 보면 이거 어떻게 이해해야 하는 거지 라는 생각이 들 수 있습니다.

> 사실 위 코드를 보면 콤마 연산자가 여기서 어떤 역할을 하는지 잘 모를 수도 있습니다. 여기선 단순히 배열에서의 콤마와 표현식 사이에서의 콤마는 다르다 정도를 생각하고 코드를 읽고 이해할 수 있는 정도면 충분할 것 같습니다.

## 2.

전역변수의 값에 인자로 받은 특정 숫자를 더해서 반환하는 함수를 만들어봅시다.

```js
// 전역공간이라고 가정을 해보자.
let value = 0;

// 1)
function addNumber(number) {
  value += number;
  return value;
}

// 2) 콤마 연산자
function addNumber(number) {
  return (value += number), value;
}

// 3) 화살표 함수 + 콤마 연산자
const addNumber = (number) => ((value += number), value);
```

> 위 3개의 함수는 표현하는 방식만 다를뿐 모두 같은 로직을 담고 있다. 콤마 연산자를 사용하면 리턴문 안에서 콤마 앞 뒤의 표현식이 연산되고 마지막 값이 반환된다.

> 세번째 코드에 대해서 이해가 잘 안되다면, 우선 화살표 함수의 Syntax에 대해서 알아야 한다. 화살표 함수에 대해선 [여기](https://poiemaweb.com/es6-arrow-function#1-%ED%99%94%EC%82%B4%ED%91%9C-%ED%95%A8%EC%88%98%EC%9D%98-%EC%84%A0%EC%96%B8)를 참고하여 읽어보시길 바랍니다.(화살표 함수의 선언과 호출부분만 읽어봅시다.) 화살표 함수는 생각보다 많은 것을 담고 있기때문에 차차 알아가는 것을 추천하고 이 부분이 이해가 되지 않는다면 이렇게도 사용할 수 있구나 라고 생각하고 넘어가도 상관없습니다. 😎

> 위처럼 로직인 단순한 경우, 콤마 연산자를 사용하면 코드를 좀 더 간결하게 줄일 수 있습니다. 하지만 로직이 복잡해지는 경우엔 가독성이 떨어지기 때문에 각각의 로직을 표현해주는 것이 훨씬 좋을 것 같습니다. 개인적으로 위 코드도 1번처럼 사용하는 것이 더 좋지않나 하는 생각이 듭니다. 🤩

# 결론

- 단순한 콤마(ex. 배열 속 콤마 등)와 `연산자 콤마`를 구분하여 이해할 수 있습니다.

- 연산자 콤마의 작동방식은 콤마를 통한 표현식의 나열에서 각각의 표현식이 연산되고 마지막 표현식이 반환됩니다.

- 단순한 로직에서는 콤마 연산자를 사용하여 코드를 표현할수 있지만, 복잡한 로직 혹은 콤마 연산자를 통해서 가독성이 떨어진다면 비추천합니다.
